!function(a,b){var c,d,b,e=a.createjs,f=a.THREE;!function(a){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.slice(0,n.length-1).concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(b,c){return function(){var d=v.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),n.apply(a,d.concat([b,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(b){if(e(r,b)){var c=r[b];delete r[b],t[b]=!0,m.apply(a,c)}if(!e(q,b)&&!e(t,b))throw new Error("No "+b);return q[b]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(b,c,d,f){var h,k,l,m,n,s,u=[],v=typeof d;if(f=f||b,"undefined"===v||"function"===v){for(c=!c.length&&d.length?["require","exports","module"]:c,n=0;n<c.length;n+=1)if(m=o(c[n],f),k=m.f,"require"===k)u[n]=p.require(b);else if("exports"===k)u[n]=p.exports(b),s=!0;else if("module"===k)h=u[n]=p.module(b);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(b+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=d?d.apply(q[b],u):void 0,b&&(h&&h.exports!==a&&h.exports!==q[b]?q[b]=h.exports:l===a&&s||(q[b]=l))}else b&&(q[b]=d)},c=d=n=function(b,c,d,e,f){if("string"==typeof b)return p[b]?p[b](c):j(o(b,c).f);if(!b.splice){if(s=b,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(a,b,c,d):setTimeout(function(){m(a,b,c,d)},4),n},n.config=function(a){return n(a)},c._defined=q,b=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},b.amd={jQuery:!0}}(),b("../vendor/almond/almond",function(){}),b("davinci-visual/core",["require","exports"],function(a,b){var c={VERSION:"0.0.20"};return c}),b("davinci-visual/VisualElement",["require","exports"],function(a,b){var c=function(){function a(a,b,c,d){void 0===c&&(c=1),void 0===d&&(d=!1),this.geometry=a,this.material=new f.MeshLambertMaterial({color:b,opacity:c,transparent:d}),this.mesh=new f.Mesh(this.geometry,this.material)}return Object.defineProperty(a.prototype,"position",{get:function(){return this.mesh.position},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"quaternion",{get:function(){return this.mesh.quaternion},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scale",{get:function(){return this.mesh.scale},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"opacity",{get:function(){return this.material.opacity},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"color",{get:function(){return this.material.color},enumerable:!0,configurable:!0}),a}();return c});var g=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-visual/RevolutionGeometry",["require","exports"],function(a,b){var c=function(a){function b(b,c,d,e,g,h){a.call(this),d=d||12,e=e||0,g=g||2*Math.PI;var i,j,k,l,m=Math.abs(2*Math.PI-Math.abs(g-e))<1e-4,n=m?d:d+1,o=1/d,p=(g-e)*o;for(i=0,k=n;k>i;i++){var q=e+i*p,r=q/2,s=Math.cos(r),t=Math.sin(r),u=new f.Quaternion(c.x*t,c.y*t,c.z*t,s);for(j=0,l=b.length;l>j;j++){var v=b[j],w=new f.Vector3(v.x,v.y,v.z);w.applyQuaternion(u),h&&w.applyQuaternion(h),this.vertices.push(w)}}var x=1/(b.length-1),y=b.length,z=y*n;for(i=0,k=d;k>i;i++)for(j=0,l=b.length-1;l>j;j++){var A=j+y*i,B=A%z,C=(A+y)%z,D=(A+1+y)%z,E=(A+1)%z,F=i*o,G=j*x,H=F+o,I=G+x;this.faces.push(new f.Face3(E,C,B)),this.faceVertexUvs[0].push([new f.Vector2(F,G),new f.Vector2(H,G),new f.Vector2(F,I)]),this.faces.push(new f.Face3(E,D,C)),this.faceVertexUvs[0].push([new f.Vector2(H,G),new f.Vector2(H,I),new f.Vector2(F,I)])}this.computeFaceNormals(),this.computeVertexNormals()}return g(b,a),b}(f.Geometry);return c});var g=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-visual/ArrowGeometry",["require","exports","davinci-visual/RevolutionGeometry"],function(a,b,c){var d=function(a){function b(b,c,d,e,g,h,i,j){b=b||1,c=c||new f.Quaternion(0,0,0,1),e=(e||1)*b,g=(g||.01)*b,h=(h||.08)*b,i=(i||.2)*b,j=j||new f.Vector3(0,0,1);var k=e-i,l=e/2,m=function(a){return a.x?2:a.y?1:0},n=function(a){return a.x>0?1:a.x<0?-1:a.y>0?1:a.y<0?-1:a.z>0?1:a.z<0?-1:0},o=function(a){var b=m(a),c=n(a),d=(b+0)%3,e=(b+1)%3,i=(b+2)%3,j=[[0,0,l*c],[h,0,(k-l)*c],[g,0,(k-l)*c],[g,0,-l*c],[0,0,-l*c]],o=j.map(function(a){return new f.Vector3(a[d],a[e],a[i])}),p=new f.Quaternion(a.x,a.y,a.z,0);return{points:o,generator:p}},p=o(j);a.call(this,p.points,p.generator,d,0,2*Math.PI,c)}return g(b,a),b}(c);return d});var g=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-visual/Arrow",["require","exports","davinci-visual/VisualElement","davinci-visual/ArrowGeometry"],function(a,b,c,d){var e=function(a){function b(b,c,e,f){void 0===e&&(e=1),void 0===f&&(f=!1),a.call(this,new d(b),c,e,f)}return g(b,a),b}(c);return e});var g=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-visual/Box",["require","exports","davinci-visual/VisualElement"],function(a,b,c){var d=function(a){function b(b,c,d,e,g,h){void 0===g&&(g=1),void 0===h&&(h=!1),a.call(this,new f.BoxGeometry(b,c,d),e,g,h)}return g(b,a),b}(c);return d});var g=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-visual/VortexGeometry",["require","exports"],function(a,b){var c=function(a){function b(b,c,d,e,g,h,i){function j(a,b){var c=b%l;if(c===l-1)return j(a,b-1);var d=(b-c)/l;return t*(d+c*u)}function k(a){var b=a%l;return b===l-1?c:d}a.call(this);var l=9;b=b||1,c=c||.08,d=d||.01,e=e||.2,g=g||.8,h=h||6;var m=h*l;i=i||8;for(var n=2*Math.PI,o=b,p=new f.Vector3,q=[],r=[],s=g/(e+g),t=n/h,u=s/(l-2),v=0;i>=v;v++)for(var w=n*v/i,x=Math.cos(w),y=Math.sin(w),z=0;m>=z;z++){var A=j(m,z),B=Math.cos(A),C=Math.sin(A);p.x=o*B,p.y=o*C;var D=new f.Vector3,E=k(z);D.x=(o+E*x)*B,D.y=(o+E*x)*C,D.z=E*y,this.vertices.push(D),q.push(new f.Vector2(z/m,v/i)),r.push(D.clone().sub(p).normalize())}for(var v=1;i>=v;v++)for(var z=1;m>=z;z++){var F=(m+1)*v+z-1,G=(m+1)*(v-1)+z-1,H=(m+1)*(v-1)+z,I=(m+1)*v+z,J=new f.Face3(F,G,I,[r[F],r[G],r[I]]);J.normal.add(r[F]),J.normal.add(r[G]),J.normal.add(r[I]),J.normal.normalize(),this.faces.push(J),this.faceVertexUvs[0].push([q[F].clone(),q[G].clone(),q[I].clone()]),J=new f.Face3(G,H,I,[r[G],r[H],r[I]]),J.normal.add(r[G]),J.normal.add(r[H]),J.normal.add(r[I]),J.normal.normalize(),this.faces.push(J),this.faceVertexUvs[0].push([q[G].clone(),q[H].clone(),q[I].clone()])}}return g(b,a),b}(f.Geometry);return c});var g=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-visual/Vortex",["require","exports","davinci-visual/VisualElement","davinci-visual/VortexGeometry"],function(a,b,c,d){var e=function(a){function b(b,c,e,f){void 0===e&&(e=1),void 0===f&&(f=!1),a.call(this,new d(4,.32,.04,.08,.3,8,12),c,e,f)}return g(b,a),b}(c);return e}),b("davinci-visual/trackball",["require","exports"],function(a,b){var c=function(a,b){function c(a){p.enabled!==!1&&(b.removeEventListener("keydown",c),B=A,A===z.NONE&&(a.keyCode!==p.keys[z.ROTATE]||p.noRotate?a.keyCode!==p.keys[z.ZOOM]||p.noZoom?a.keyCode!==p.keys[z.PAN]||p.noPan||(A=z.PAN):A=z.ZOOM:A=z.ROTATE))}function d(a){p.enabled!==!1&&(A=B,b.addEventListener("keydown",c,!1))}function e(a){p.enabled!==!1&&(a.preventDefault(),a.stopPropagation(),A===z.NONE&&(A=a.button),A!==z.ROTATE||p.noRotate?A!==z.ZOOM||p.noZoom?A!==z.PAN||p.noPan||(G.copy(q(a.pageX,a.pageY)),H.copy(G)):(C.copy(q(a.pageX,a.pageY)),D.copy(C)):(s.copy(r(a.pageX,a.pageY)),t.copy(s)),m.addEventListener("mousemove",g,!1),m.addEventListener("mouseup",h,!1))}function g(a){p.enabled!==!1&&(a.preventDefault(),a.stopPropagation(),A!==z.ROTATE||p.noRotate?A!==z.ZOOM||p.noZoom?A!==z.PAN||p.noPan||H.copy(q(a.pageX,a.pageY)):D.copy(q(a.pageX,a.pageY)):(t.copy(s),s.copy(r(a.pageX,a.pageY))))}function h(a){p.enabled!==!1&&(a.preventDefault(),a.stopPropagation(),A=z.NONE,m.removeEventListener("mousemove",g),m.removeEventListener("mouseup",h))}function i(a){if(p.enabled!==!1){a.preventDefault(),a.stopPropagation();var b=0;a.wheelDelta?b=a.wheelDelta/40:a.detail&&(b=-a.detail/3),C.y+=.01*b}}function j(a){if(p.enabled!==!1)switch(a.touches.length){case 1:A=z.TOUCH_ROTATE,s.copy(r(a.touches[0].pageX,a.touches[0].pageY)),t.copy(s);break;case 2:A=z.TOUCH_ZOOM_PAN;var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY;F=E=Math.sqrt(b*b+c*c);var d=(a.touches[0].pageX+a.touches[1].pageX)/2,e=(a.touches[0].pageY+a.touches[1].pageY)/2;G.copy(q(d,e)),H.copy(G);break;default:A=z.NONE}}function k(a){if(p.enabled!==!1)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:t.copy(s),s.copy(r(a.touches[0].pageX,a.touches[0].pageY));break;case 2:var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY;F=Math.sqrt(b*b+c*c);var d=(a.touches[0].pageX+a.touches[1].pageX)/2,e=(a.touches[0].pageY+a.touches[1].pageY)/2;H.copy(q(d,e));break;default:A=z.NONE}}function l(a){if(p.enabled!==!1){switch(a.touches.length){case 1:t.copy(s),s.copy(r(a.touches[0].pageX,a.touches[0].pageY));break;case 2:E=F=0;var b=(a.touches[0].pageX+a.touches[1].pageX)/2,c=(a.touches[0].pageY+a.touches[1].pageY)/2;H.copy(q(b,c)),G.copy(H)}A=z.NONE}}{var m=b.document,n=m.documentElement,o={left:0,top:0,width:0,height:0},p={enabled:!0,rotateSpeed:1,zoomSpeed:1.2,panSpeed:.3,noRotate:!1,noZoom:!1,noPan:!1,staticMoving:!1,dynamicDampingFactor:.2,minDistance:0,maxDistance:1/0,keys:[65,83,68],update:function(){u.subVectors(a.position,v),p.noRotate||y(),p.noZoom||I(),p.noPan||J(),a.position.addVectors(v,u),K(),a.lookAt(v),M.distanceToSquared(a.position)>L&&M.copy(a.position)},handleResize:function(){var a=n.getBoundingClientRect();o.left=a.left+b.pageXOffset-n.clientLeft,o.top=a.top+b.pageYOffset-n.clientTop,o.width=a.width,o.height=a.height}},q=function(){var a=new f.Vector2;return function(b,c){return a.set((b-o.left)/o.width,(c-o.top)/o.height),a}}(),r=function(){var a=new f.Vector2;return function(b,c){return a.set((b-.5*o.width-o.left)/(.5*o.width),(o.height+2*(o.top-c))/o.width),a}}(),s=new f.Vector2,t=new f.Vector2,u=new f.Vector3,v=new f.Vector3,w=new f.Vector3,x=0,y=function(){var b,c=new f.Vector3,d=new f.Quaternion,e=new f.Vector3,g=new f.Vector3,h=new f.Vector3,i=new f.Vector3;return function(){i.set(s.x-t.x,s.y-t.y,0),b=i.length(),b?(u.copy(a.position).sub(v),e.copy(u).normalize(),g.copy(a.up).normalize(),h.crossVectors(g,e).normalize(),g.setLength(s.y-t.y),h.setLength(s.x-t.x),i.copy(g.add(h)),c.crossVectors(i,u).normalize(),b*=p.rotateSpeed,d.setFromAxisAngle(c,b),u.applyQuaternion(d),a.up.applyQuaternion(d),w.copy(c),x=b):!p.staticMoving&&x&&(x*=Math.sqrt(1-p.dynamicDampingFactor),u.copy(a.position).sub(v),d.setFromAxisAngle(w,x),u.applyQuaternion(d),a.up.applyQuaternion(d)),t.copy(s)}}(),z={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},A=z.NONE,B=z.NONE,C=new f.Vector2,D=new f.Vector2,E=0,F=0,G=new f.Vector2,H=new f.Vector2,I=function(){var a;A===z.TOUCH_ZOOM_PAN?(a=E/F,E=F,u.multiplyScalar(a)):(a=1+(D.y-C.y)*p.zoomSpeed,1!==a&&a>0&&(u.multiplyScalar(a),p.staticMoving?C.copy(D):C.y+=(D.y-C.y)*p.dynamicDampingFactor))},J=function(){var b=new f.Vector2,c=new f.Vector3,d=new f.Vector3;return function(){b.copy(H).sub(G),b.lengthSq()&&(b.multiplyScalar(u.length()*p.panSpeed),d.copy(u).cross(a.up).setLength(b.x),d.add(c.copy(a.up).setLength(b.y)),a.position.add(d),v.add(d),p.staticMoving?G.copy(H):G.add(b.subVectors(H,G).multiplyScalar(p.dynamicDampingFactor)))}}(),K=function(){p.noZoom&&p.noPan||(u.lengthSq()>p.maxDistance*p.maxDistance&&a.position.addVectors(v,u.setLength(p.maxDistance)),u.lengthSq()<p.minDistance*p.minDistance&&a.position.addVectors(v,u.setLength(p.minDistance)))},L=1e-6,M=new f.Vector3;v.clone(),a.position.clone(),a.up.clone()}return n.addEventListener("contextmenu",function(a){a.preventDefault()},!1),n.addEventListener("mousedown",e,!1),n.addEventListener("mousewheel",i,!1),n.addEventListener("DOMMouseScroll",i,!1),n.addEventListener("touchstart",j,!1),n.addEventListener("touchend",l,!1),n.addEventListener("touchmove",k,!1),b.addEventListener("keydown",c,!1),b.addEventListener("keyup",d,!1),p.handleResize(),p.update(),p};return c}),b("davinci-visual/Workbench2D",["require","exports"],function(a,b){function c(a,b){for(var c=a.getElementsByTagName(b),d=c.length-1;d>=0;d--){var e=c[d];e.parentNode.removeChild(e)}}var d=function(){function a(a,b){function c(c){var d=b.innerWidth,e=b.innerHeight;a.width=d,a.height=e}this.canvas=a,this.wnd=b,this.sizer=c}return a.prototype.setUp=function(){this.wnd.document.body.insertBefore(this.canvas,this.wnd.document.body.firstChild),this.wnd.addEventListener("resize",this.sizer,!1),this.sizer(null)},a.prototype.tearDown=function(){this.wnd.removeEventListener("resize",this.sizer,!1),c(this.wnd.document,"canvas")},a}();return d}),b("davinci-visual/Workbench3D",["require","exports"],function(a,b){function c(a,b){for(var c=a.getElementsByTagName(b),d=c.length-1;d>=0;d--){var e=c[d];e.parentNode.removeChild(e)}}var d=function(){function a(a,b,c,d,e){function f(a){var f=e.innerWidth,g=e.innerHeight;b.setSize(f,g),c.aspect=f/g,c.updateProjectionMatrix(),d.handleResize()}this.canvas=a,this.wnd=e,this.sizer=f}return a.prototype.setUp=function(){this.wnd.document.body.insertBefore(this.canvas,this.wnd.document.body.firstChild),this.wnd.addEventListener("resize",this.sizer,!1),this.sizer(null)},a.prototype.tearDown=function(){this.wnd.removeEventListener("resize",this.sizer,!1),c(this.wnd.document,"canvas")},a}();return d}),b("davinci-visual/Visual",["require","exports","davinci-visual/trackball","davinci-visual/Workbench2D","davinci-visual/Workbench3D"],function(a,b,c,d,g){var h=function(){function a(a){this.scene=new f.Scene,this.camera=new f.PerspectiveCamera(45,1,.1,1e4),this.renderer=new f.WebGLRenderer;var b=new f.AmbientLight(1118481);this.scene.add(b);var h=new f.PointLight(16777215);h.position.set(20,20,20),this.scene.add(h);var i=new f.DirectionalLight(16777215);i.position.set(0,1,0),this.scene.add(i),this.camera.position.set(10,9,8),this.camera.up.set(0,0,1),this.camera.lookAt(this.scene.position),this.controls=c(this.camera,a),this.renderer.setClearColor(new f.Color(526344),1),this.workbench3D=new g(this.renderer.domElement,this.renderer,this.camera,this.controls,a),this.canvas2D=a.document.createElement("canvas"),this.canvas2D.style.position="absolute",this.canvas2D.style.top="0px",this.canvas2D.style.left="0px",this.workbench2D=new d(this.canvas2D,a),this.stage=new e.Stage(this.canvas2D),this.stage.autoClear=!0,this.controls.rotateSpeed=1,this.controls.zoomSpeed=1.2,this.controls.panSpeed=.8,this.controls.noZoom=!1,this.controls.noPan=!1,this.controls.staticMoving=!0,this.controls.dynamicDampingFactor=.3,this.controls.keys=[65,83,68]}return a.prototype.add=function(a){this.scene.add(a)},a.prototype.setUp=function(){this.workbench3D.setUp(),this.workbench2D.setUp()},a.prototype.tearDown=function(){this.workbench3D.tearDown(),this.workbench2D.tearDown()},a.prototype.update=function(){this.renderer.render(this.scene,this.camera),this.controls.update(),this.stage.update()},a}();return h}),b("davinci-visual",["require","exports","davinci-visual/core","davinci-visual/Arrow","davinci-visual/Box","davinci-visual/Vortex","davinci-visual/VisualElement","davinci-visual/trackball","davinci-visual/Visual","davinci-visual/Workbench2D","davinci-visual/Workbench3D"],function(a,b,c,d,e,f,g,h,i,j,k){var l={VERSION:c.VERSION,Arrow:d,Box:e,Vortex:f,VisualElement:g,trackball:h,Visual:i,Workbench2D:j,Workbench3D:k};return l});var h=d("davinci-visual");"undefined"!=typeof module&&module.exports?module.exports=h:a.define?!function(a){a(function(){return h})}(a.define):a.visual=h}(this);