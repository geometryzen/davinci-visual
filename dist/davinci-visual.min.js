!function(a,b){var c,d,b,e=a.define;!function(a){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.slice(0,n.length-1).concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(b,c){return function(){var d=v.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),n.apply(a,d.concat([b,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(b){if(e(r,b)){var c=r[b];delete r[b],t[b]=!0,m.apply(a,c)}if(!e(q,b)&&!e(t,b))throw new Error("No "+b);return q[b]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(b,c,d,f){var h,k,l,m,n,s,u=[],v=typeof d;if(f=f||b,"undefined"===v||"function"===v){for(c=!c.length&&d.length?["require","exports","module"]:c,n=0;n<c.length;n+=1)if(m=o(c[n],f),k=m.f,"require"===k)u[n]=p.require(b);else if("exports"===k)u[n]=p.exports(b),s=!0;else if("module"===k)h=u[n]=p.module(b);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(b+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=d?d.apply(q[b],u):void 0,b&&(h&&h.exports!==a&&h.exports!==q[b]?q[b]=h.exports:l===a&&s||(q[b]=l))}else b&&(q[b]=d)},c=d=n=function(b,c,d,e,f){if("string"==typeof b)return p[b]?p[b](c):j(o(b,c).f);if(!b.splice){if(s=b,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(a,b,c,d):setTimeout(function(){m(a,b,c,d)},4),n},n.config=function(a){return n(a)},c._defined=q,b=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},b.amd={jQuery:!0}}(),b("../vendor/almond/almond",function(){}),b("davinci-visual/core",["require","exports"],function(a,b){var c={VERSION:"0.0.1"};return c}),b("davinci-visual/VisualElement",["require","exports"],function(a,b){var c=function(){function a(a,b,c,d){void 0===c&&(c=1),void 0===d&&(d=!1),this.geometry=a,this.material=new THREE.MeshLambertMaterial({color:b,opacity:c,transparent:d}),this.mesh=new THREE.Mesh(this.geometry,this.material)}return Object.defineProperty(a.prototype,"position",{set:function(a){this.mesh.position.set(a.x,a.y,a.z)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"attitude",{get:function(){var a=this.mesh.quaternion;return new blade.Euclidean3(a.w,0,0,0,-a.z,-a.x,-a.y,0)},set:function(a){this.mesh.quaternion.set(-a.yz,-a.zx,-a.xy,a.w)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scale",{get:function(){return this.mesh.scale},set:function(a){this.mesh.scale=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"color",{set:function(a){this.material.color=a},enumerable:!0,configurable:!0}),a}();return c});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-visual/RevolutionGeometry",["require","exports"],function(a,b){var c=function(a){function b(b,c,d,e,f,g){a.call(this),d=d||12,e=e||0,f=f||2*Math.PI;var h,i,j,k,l=Math.abs(2*Math.PI-Math.abs(f-e))<1e-4,m=l?d:d+1,n=1/d,o=(f-e)*n;for(h=0,j=m;j>h;h++){var p=e+h*o,q=p/2,r=Math.cos(q),s=Math.sin(q),t=new THREE.Quaternion(c.x*s,c.y*s,c.z*s,r);for(i=0,k=b.length;k>i;i++){var u=b[i],v=new THREE.Vector3(u.x,u.y,u.z);v.applyQuaternion(t),g&&v.applyQuaternion(g),this.vertices.push(v)}}var w=1/(b.length-1),x=b.length,y=x*m;for(h=0,j=d;j>h;h++)for(i=0,k=b.length-1;k>i;i++){var z=i+x*h,A=z%y,B=(z+x)%y,C=(z+1+x)%y,D=(z+1)%y,E=h*n,F=i*w,G=E+n,H=F+w;this.faces.push(new THREE.Face3(D,B,A)),this.faceVertexUvs[0].push([new THREE.Vector2(E,F),new THREE.Vector2(G,F),new THREE.Vector2(E,H)]),this.faces.push(new THREE.Face3(D,C,B)),this.faceVertexUvs[0].push([new THREE.Vector2(G,F),new THREE.Vector2(G,H),new THREE.Vector2(E,H)])}this.computeFaceNormals(),this.computeVertexNormals()}return f(b,a),b}(THREE.Geometry);return c});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-visual/ArrowGeometry",["require","exports","davinci-visual/RevolutionGeometry"],function(a,b,c){var d=function(a){function b(b,c,d,e,f,g,h,i){b=b||1,c=c||new THREE.Quaternion(0,0,0,1),e=(e||1)*b,f=(f||.01)*b,g=(g||.08)*b,h=(h||.2)*b,i=i||new THREE.Vector3(0,0,1);var j=e-h,k=e/2,l=function(a){return a.x?2:a.y?1:0},m=function(a){return a.x>0?1:a.x<0?-1:a.y>0?1:a.y<0?-1:a.z>0?1:a.z<0?-1:0},n=function(a){var b=l(a),c=m(a),d=(b+0)%3,e=(b+1)%3,h=(b+2)%3,i=[[0,0,k*c],[g,0,(j-k)*c],[f,0,(j-k)*c],[f,0,-k*c],[0,0,-k*c]],n=i.map(function(a){return new THREE.Vector3(a[d],a[e],a[h])}),o=new THREE.Quaternion(a.x,a.y,a.z,0);return{points:n,generator:o}},o=n(i);a.call(this,o.points,o.generator,d,0,2*Math.PI,c)}return f(b,a),b}(c);return d});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-visual/Arrow",["require","exports","davinci-visual/VisualElement","davinci-visual/ArrowGeometry"],function(a,b,c,d){!function(a){function b(b,c,e,f){void 0===e&&(e=1),void 0===f&&(f=!1),a.call(this,new d(b),c,e,f)}return f(b,a),b}(c)});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-visual/Box",["require","exports","davinci-visual/VisualElement"],function(a,b,c){!function(a){function b(b,c,d,e,f,g){void 0===f&&(f=1),void 0===g&&(g=!1),a.call(this,new THREE.BoxGeometry(b,c,d),e,f,g)}return f(b,a),b}(c)}),b("davinci-visual",["require","exports","davinci-visual/core","davinci-visual/Arrow","davinci-visual/Box"],function(a,b,c,d,e){var f={VERSION:c.VERSION,Arrow:d,Box:e};return f});var g=d("davinci-visual");"undefined"!=typeof module&&module.exports?module.exports=g:e?!function(a){a(function(){return g})}(e):a.visual=g}(this);